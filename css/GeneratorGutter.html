<html>
    <head>
        <title>Generating css</title>
    </head>
    <body>

        <div id="all"></div>

        <script>
            var maxCols = 10;
            var prefix = ".mosaic-grid-";
            var gutterPrefix = ".gutter-";
            var tile = ".mosaic-tile";
            var widthPrefix = ".width-";
            var heightPrefix = ".height-";
            var newline = "<br />";
            var str = "";

            for (var i = 1; i <= maxCols; i++) {
                for (var g = 1; g < i; g++) {
                    var inc = i+1;
                    
                    str += "/* " + i + " Columns, Gutter " + g + " */" + newline;
                    var width = (100 - ((i*g)+g))/i;
                    str += prefix + i + gutterPrefix + g + " " + tile + " { " + newline;
                    str += "width: " + width+ "%" + ";" + newline;
                    str += "padding-bottom: " + width+ "%" + ";" + newline;
                    str += "margin-right: " + g + "%" + ";" + newline;
                    str += "margin-bottom: " + g + "%" + ";" + newline;
                    str += "}" + newline + newline;
                    
                    str += prefix + i + gutterPrefix + g + " " + tile + ":nth-child(" + i + "n) {" + newline;
                    str += "margin-right: 0;" + newline + "}" + newline;
                    
                    str += prefix + i + gutterPrefix + g + " " + tile + ":nth-child(" + i + "n+1) {" + newline;
                    str += "margin-left: " + g+ "%;" + newline + "}" + newline;
                    
                    str += prefix + i + gutterPrefix + g + " " + tile + ":nth-child(-n+" + inc + ") {" + newline;
                    str += "margin-top: " + g+ "%;" + newline + "}" + newline;

                    for (var j = 1; j <= i; j++) {
                        // all widths
                        var jWidth = width * j + g * j - g;
                        str += prefix + i + gutterPrefix + g + " " + widthPrefix + j + " {" + newline;
                        str += "width: " + jWidth+ "%" + ";" + newline + "}" + newline + newline;
                    }

                    for (var k = 1; k <= maxCols; k++) {
                        // all heights
                        var height = width * k + g * k - g;
                        str += prefix + i + gutterPrefix + g + " " + heightPrefix + k + " {" + newline;
                        str += "padding-bottom: " + height+ "%" + ";" + newline + "}" + newline + newline;
                    }
                }
            }

            document.getElementById('all').innerHTML = str;

        </script>
    </body>
</html>
